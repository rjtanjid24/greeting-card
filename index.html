<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap');

        /* ‡ßß. ‡¶™‡ßá‡¶ú ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ (No Scroll) */
        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 0;
            height: 100vh; /* ‡¶™‡ßÅ‡¶∞‡ßã ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶π‡¶æ‡¶á‡¶ü */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow-y: auto; /* ‡¶õ‡ßã‡¶ü ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá, ‡¶¨‡ßú ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° */
        }

        .container {
            width: 95%;
            max-width: 1200px;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            /* ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶Ø‡¶æ‡¶§‡ßá ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡¶æ‡¶á‡¶∞‡ßá ‡¶®‡¶æ ‡¶Ø‡¶æ‡ßü */
            max-height: 98vh; 
            overflow: hidden;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        h2 {
            text-align: center;
            color: #124e66;
            margin: 0 0 5px 0;
            font-size: 24px;
        }

        p.subtitle {
            text-align: center;
            color: #666;
            margin: 0 0 20px 0;
            font-size: 13px;
        }

        /* ‡ß®. ‡¶ó‡ßç‡¶∞‡¶ø‡¶° ‡¶≤‡ßá‡¶Ü‡¶â‡¶ü (Compact) */
        .editor-grid {
            display: grid;
            grid-template-columns: 320px 1fr; /* ‡¶¨‡¶æ‡¶Æ‡ßá ‡¶´‡¶ø‡¶ï‡ßç‡¶∏‡¶° ‡ß©‡ß®‡ß¶px, ‡¶°‡¶æ‡¶®‡ßá ‡¶¨‡¶æ‡¶ï‡¶ø‡¶ü‡¶æ */
            gap: 30px;
            height: 100%;
            overflow: hidden; /* ‡¶≠‡¶ø‡¶§‡¶∞‡ßá‡¶∞ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶¨‡¶®‡ßç‡¶ß ‡¶∞‡¶æ‡¶ñ‡¶§‡ßá */
        }

        /* ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤ ‡¶∞‡ßá‡¶∏‡ßç‡¶™‡¶®‡ßç‡¶∏‡¶ø‡¶≠ */
        @media (max-width: 850px) {
            body { height: auto; display: block; padding: 20px 0; }
            .container { max-height: none; overflow: visible; }
            .editor-grid { grid-template-columns: 1fr; }
            .preview-box canvas { max-height: 400px !important; }
        }

        /* ‡¶¨‡¶æ‡¶Æ ‡¶™‡¶æ‡¶∂‡ßá‡¶∞ ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤‡¶∏ */
        .controls {
            overflow-y: auto; /* ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶¨‡¶æ‡¶Æ ‡¶™‡¶æ‡¶∂ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶≤ ‡¶π‡¶¨‡ßá ‡¶Ø‡¶¶‡¶ø ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞ ‡¶π‡ßü */
            padding-right: 10px;
            max-height: 75vh;
        }

        label {
            font-weight: 600;
            display: block;
            margin-bottom: 5px;
            color: #444;
            font-size: 14px;
        }

        input[type="text"], input[type="file"] {
            width: 100%;
            padding: 8px; /* ‡¶™‡ßç‡¶Ø‡¶æ‡¶°‡¶ø‡¶Ç ‡¶ï‡¶Æ‡¶æ‡¶®‡ßã ‡¶π‡ßü‡ßá‡¶õ‡ßá */
            border: 1px solid #ddd;
            border-radius: 6px;
            margin-bottom: 15px;
            box-sizing: border-box;
            font-size: 14px;
        }

        input[type=range] {
            width: 100%;
            margin-bottom: 15px;
            cursor: pointer;
        }

        /* ‡ß©. ‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â ‡¶¨‡¶ï‡ßç‡¶∏ (‡¶Æ‡ßá‡¶á‡¶® ‡¶´‡¶ø‡¶ï‡ßç‡¶∏) */
        .preview-box {
            background: #e9ecef;
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            border: 2px dashed #cbd5e0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%; /* ‡¶ó‡ßç‡¶∞‡¶ø‡¶°‡ßá‡¶∞ ‡¶™‡ßÅ‡¶∞‡ßã ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶®‡¶ø‡¶¨‡ßá */
            max-height: 75vh; /* ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶®‡ßá‡¶∞ ‡ß≠‡ß´% ‡¶è‡¶∞ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶π‡¶¨‡ßá ‡¶®‡¶æ */
        }

        /* ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶ï‡¶®‡ßç‡¶ü‡ßç‡¶∞‡ßã‡¶≤ (CSS ‡¶¶‡¶ø‡ßü‡ßá ‡¶õ‡ßã‡¶ü ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶¨‡ßá) */
        canvas {
            max-width: 100%;
            max-height: 60vh; /* ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ú‡¶ø‡¶ï ‡¶≤‡¶æ‡¶á‡¶®: ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶® ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡ßü‡ßÄ ‡¶â‡¶ö‡ßç‡¶ö‡¶§‡¶æ ‡¶õ‡ßã‡¶ü ‡¶π‡¶¨‡ßá */
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .download-btn {
            display: block;
            width: 100%;
            max-width: 300px; /* ‡¶¨‡¶æ‡¶ü‡¶® ‡¶¨‡ßá‡¶∂‡¶ø ‡¶¨‡ßú ‡¶®‡¶æ ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø */
            padding: 12px;
            background-color: #124e66;
            color: white;
            text-align: center;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 15px;
            text-decoration: none; 
            transition: 0.3s;
        }
        .download-btn:hover { background-color: #0d3b4d; }

        .frames-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .frame-thumb {
            width: 60px;
            height: 60px;
            border: 2px solid #ddd;
            border-radius: 6px;
            cursor: pointer;
            object-fit: cover;
        }
        
        .frame-thumb.active {
            border-color: #124e66;
            box-shadow: 0 0 5px rgba(18, 78, 102, 0.5);
        }
    </style>
</head>
<body>

    <div class="container">
        <div>
            <h2>‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
            <p class="subtitle">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶õ‡¶¨‡¶ø, ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶™‡¶¶‡¶¨‡ßÄ ‡¶¶‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        </div>

        <div class="editor-grid">
            <div class="controls">
                <label>‡¶õ‡¶¨‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                <input type="file" id="uploadInput" accept="image/*">

                <label>‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                <input type="range" id="zoomSlider" min="0.5" max="3" step="0.05" value="1" disabled>

                <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</label>
                <input type="text" id="nameInput" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶§‡¶æ‡¶®‡¶ú‡¶ø‡¶¶ ‡¶∂‡ßÅ‡¶≠‡ßç‡¶∞)">

                <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶¶‡¶¨‡ßÄ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®</label>
                <input type="text" id="designationInput" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶∞)">

                <label>‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                <div class="frames-container">
                    <img src="post-6-2025.png" class="frame-thumb active" onclick="selectFrame(this)">
                </div>
            </div>

            <div class="preview-box">
                <canvas id="canvas" width="1080" height="1080"></canvas>
                <a href="#" id="downloadLink" class="download-btn">üì• ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const uploadInput = document.getElementById('uploadInput');
        const nameInput = document.getElementById('nameInput');
        const designationInput = document.getElementById('designationInput');
        const zoomSlider = document.getElementById('zoomSlider');
        const downloadLink = document.getElementById('downloadLink');

        let userImage = new Image();
        let frameImage = new Image();
        let zoomLevel = 1;

        // ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏ (‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ)
        const circleCenterX = 760; 
        const circleCenterY = 700; 
        const textLeftMargin = 50;  
        const nameY = 920;          
        const desigY = 970;         

        window.onload = function() {
            const defaultFrame = document.querySelector('.frame-thumb.active');
            if(defaultFrame) {
                frameImage.onload = function() { draw(); };
                frameImage.src = defaultFrame.src;
            }
        };

        uploadInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    userImage.onload = () => {
                        zoomSlider.disabled = false;
                        zoomSlider.value = 1;
                        zoomLevel = 1;
                        draw();
                    };
                    userImage.src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        nameInput.addEventListener('input', draw);
        designationInput.addEventListener('input', draw);
        zoomSlider.addEventListener('input', (e) => {
            zoomLevel = parseFloat(e.target.value);
            draw();
        });

        function selectFrame(imgElement) {
            document.querySelectorAll('.frame-thumb').forEach(img => img.classList.remove('active'));
            imgElement.classList.add('active');
            frameImage.src = imgElement.src;
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (userImage.src && userImage.complete && userImage.naturalWidth !== 0) {
                const baseScale = Math.max(canvas.width / userImage.width, canvas.height / userImage.height);
                const finalScale = baseScale * zoomLevel;
                const imgW = userImage.width * finalScale;
                const imgH = userImage.height * finalScale;
                const x = circleCenterX - (imgW / 2);
                const y = circleCenterY - (imgH / 2);
                ctx.drawImage(userImage, x, y, imgW, imgH);
            }

            if (frameImage.src && frameImage.complete && frameImage.naturalWidth !== 0) {
                ctx.drawImage(frameImage, 0, 0, canvas.width, canvas.height);
            }

            drawText();
        }

        function drawText() {
            ctx.textAlign = 'left';
            ctx.fillStyle = '#ffffff'; 

            const name = nameInput.value;
            const designation = designationInput.value;

            if (name) {
                ctx.font = 'bold 50px "Hind Siliguri", sans-serif';
                ctx.fillText(name, textLeftMargin, nameY);
            }

            if (designation) {
                ctx.font = '400 35px "Hind Siliguri", sans-serif';
                ctx.fillText(designation, textLeftMargin, desigY);
            }
        }

        downloadLink.addEventListener('click', function(e) {
            const inputName = nameInput.value.trim();
            const fileName = inputName ? `card-${inputName}.png` : 'greeting-card.png';
            
            try {
                const dataUrl = canvas.toDataURL('image/png');
                this.href = dataUrl;
                this.download = fileName;
            } catch (error) {
                console.error("Download Error", error);
                alert("‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶´‡ßá‡¶á‡¶≤‡ßç‡¶°‡•§ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶á‡¶Æ‡ßá‡¶ú ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
            }
        });
    </script>
</body>
</html>
