<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶ú‡ßá‡¶®‡¶æ‡¶∞‡ßá‡¶ü‡¶∞</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Hind Siliguri', sans-serif;
            background-color: #f0f2f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }

        h2 {
            text-align: center;
            color: #124e66;
            margin-bottom: 5px;
        }

        p.subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 14px;
        }

        .editor-grid {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            gap: 40px;
        }

        @media (max-width: 900px) {
            .editor-grid { grid-template-columns: 1fr; }
        }

        label {
            font-weight: 600;
            display: block;
            margin-bottom: 8px;
            color: #444;
        }

        input[type="text"], input[type="file"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 20px;
            box-sizing: border-box;
        }

        input[type=range] {
            width: 100%;
            margin-bottom: 20px;
            cursor: pointer;
        }

        .preview-box {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px dashed #cbd5e0;
        }

        canvas {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .download-btn {
            display: block;
            width: 100%;
            padding: 14px;
            background-color: #124e66;
            color: white;
            text-align: center;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            text-decoration: none; 
            transition: 0.3s;
        }
        .download-btn:hover { background-color: #0d3b4d; }

        .frames-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .frame-thumb {
            width: 70px;
            height: 70px;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            object-fit: cover;
        }
        
        .frame-thumb.active {
            border-color: #124e66;
            box-shadow: 0 0 5px rgba(18, 78, 102, 0.5);
        }
    </style>
</head>
<body>

    <div class="container">
        <h2>‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡ßÅ‡¶®</h2>
        <p class="subtitle">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶õ‡¶¨‡¶ø, ‡¶®‡¶æ‡¶Æ ‡¶ì ‡¶™‡¶¶‡¶¨‡ßÄ ‡¶¶‡¶ø‡ßü‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá ‡¶®‡¶ø‡¶ö‡ßá‡¶∞ ‡¶´‡¶∞‡ßç‡¶Æ‡¶ü‡¶ø ‡¶™‡ßÇ‡¶∞‡¶£ ‡¶ï‡¶∞‡ßÅ‡¶®</p>

        <div class="editor-grid">
            <div class="controls">
                <label>‡¶õ‡¶¨‡¶ø ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                <input type="file" id="uploadInput" accept="image/*">

                <label>‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶∏‡¶æ‡¶á‡¶ú ‡¶†‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶® (Zoom)</label>
                <input type="range" id="zoomSlider" min="0.5" max="3" step="0.05" value="1" disabled>

                <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ</label>
                <input type="text" id="nameInput" placeholder="‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶®‡¶æ‡¶Æ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶§‡¶æ‡¶®‡¶ú‡¶ø‡¶¶ ‡¶∂‡ßÅ‡¶≠‡ßç‡¶∞)">

                <label>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶™‡¶¶‡¶¨‡ßÄ</label>
                <input type="text" id="designationInput" placeholder="‡¶™‡¶¶‡¶¨‡ßÄ (‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü‡¶æ‡¶∞)">

                <label>‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</label>
                <div class="frames-container">
                    <img src="post-6-2025.png" class="frame-thumb active" onclick="selectFrame(this)" onerror="this.style.display='none'">
                    
                    </div>
            </div>

            <div class="preview-box">
                <canvas id="canvas" width="1080" height="1080"></canvas>
                <a href="#" id="downloadLink" class="download-btn">üì•‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®</a>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const uploadInput = document.getElementById('uploadInput');
        const nameInput = document.getElementById('nameInput');
        const designationInput = document.getElementById('designationInput');
        const zoomSlider = document.getElementById('zoomSlider');
        const downloadLink = document.getElementById('downloadLink');

        // State Variables
        let userImage = new Image();
        let frameImage = new Image();
        let zoomLevel = 1;

        // ==========================================
        // ‡¶ï‡¶®‡¶´‡¶ø‡¶ó‡¶æ‡¶∞‡ßá‡¶∂‡¶®: ‡¶™‡¶ú‡¶ø‡¶∂‡¶® ‡¶∏‡ßá‡¶ü‡¶ø‡¶Ç‡¶∏
        // ==========================================
        
        // ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶™‡¶ú‡¶ø‡¶∂‡¶® (‡¶°‡¶æ‡¶®‡¶¶‡¶ø‡¶ï‡ßá‡¶∞ ‡¶®‡¶ø‡¶ö‡ßá - ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ ‡¶ï‡¶∞‡¶æ)
        const circleCenterX = 760; 
        const circleCenterY = 700; 

        // ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶™‡¶ú‡¶ø‡¶∂‡¶® (‡¶®‡¶ø‡¶ö‡ßá ‡¶¨‡¶æ‡¶Æ ‡¶¶‡¶ø‡¶ï‡ßá - ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã)
        const textLeftMargin = 50;  
        const nameY = 920;          
        const desigY = 970;         

        // ==========================================
        // ‡ßß. ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡¶ì‡ßü‡¶æ‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶∏‡¶æ‡¶•‡ßá‡¶á ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶∏‡ßá‡¶ü‡¶Ü‡¶™
        // ==========================================
        window.onload = function() {
            const defaultFrame = document.querySelector('.frame-thumb.active');
            if(defaultFrame) {
                // ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡¶≤‡ßá ‡¶§‡¶¨‡ßá‡¶á ‡¶°‡ßç‡¶∞ ‡¶ï‡¶∞‡¶¨‡ßá
                frameImage.onload = function() {
                    draw();
                };
                // ‡¶Ø‡¶¶‡¶ø ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡¶§‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡ßü
                frameImage.onerror = function() {
                    console.error("‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶≤‡ßã‡¶° ‡¶π‡ßü‡¶®‡¶ø‡•§ ‡¶á‡¶Æ‡ßá‡¶ú‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®‡•§");
                };
                frameImage.src = defaultFrame.src;
            }
        };

        // ==========================================
        // ‡ß®. ‡¶á‡¶â‡¶ú‡¶æ‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶≤‡¶ú‡¶ø‡¶ï
        // ==========================================
        uploadInput.addEventListener('change', (e) => {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (event) => {
                    userImage.onload = () => {
                        zoomSlider.disabled = false;
                        zoomSlider.value = 1;
                        zoomLevel = 1;
                        draw();
                    };
                    userImage.src = event.target.result;
                };
                reader.readAsDataURL(file);
            }
        });

        // ==========================================
        // ‡ß©. ‡¶≤‡¶æ‡¶á‡¶≠ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü (‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶ì ‡¶ú‡ßÅ‡¶Æ)
        // ==========================================
        nameInput.addEventListener('input', draw);
        designationInput.addEventListener('input', draw);
        zoomSlider.addEventListener('input', (e) => {
            zoomLevel = parseFloat(e.target.value);
            draw();
        });

        // ==========================================
        // ‡ß™. ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶® ‡¶≤‡¶ú‡¶ø‡¶ï
        // ==========================================
        function selectFrame(imgElement) {
            // UI ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            document.querySelectorAll('.frame-thumb').forEach(img => img.classList.remove('active'));
            imgElement.classList.add('active');

            // ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü
            frameImage.src = imgElement.src;
            // onload ‡¶π‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶≤‡¶æ‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ‡¶á ‡¶Ü‡¶õ‡ßá, ‡¶§‡¶æ‡¶á src ‡¶™‡¶æ‡¶≤‡ßç‡¶ü‡¶æ‡¶≤‡ßá draw() ‡¶ï‡¶≤ ‡¶π‡¶¨‡ßá
        }

        // ==========================================
        // ‡ß´. ‡¶Æ‡ßá‡¶á‡¶® ‡¶°‡ßç‡¶∞‡ßü‡¶ø‡¶Ç ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (Draw Function)
        // ==========================================
        function draw() {
            // ‡ßß. ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ ‡¶ï‡ßç‡¶≤‡¶ø‡ßü‡¶æ‡¶∞
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // ‡ß®. ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶Ü‡¶Å‡¶ï‡¶æ
            if (userImage.src && userImage.complete && userImage.naturalWidth !== 0) {
                const baseScale = Math.max(canvas.width / userImage.width, canvas.height / userImage.height);
                const finalScale = baseScale * zoomLevel;
                
                const imgW = userImage.width * finalScale;
                const imgH = userImage.height * finalScale;

                // ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶∂‡¶®
                const x = circleCenterX - (imgW / 2);
                const y = circleCenterY - (imgH / 2);
                
                ctx.drawImage(userImage, x, y, imgW, imgH);
            }

            // ‡ß©. ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶Ü‡¶Å‡¶ï‡¶æ (‡¶∏‡¶¨‡¶∏‡¶Æ‡ßü ‡¶õ‡¶¨‡¶ø‡¶∞ ‡¶â‡¶™‡¶∞‡ßá ‡¶•‡¶æ‡¶ï‡¶¨‡ßá)
            if (frameImage.src && frameImage.complete && frameImage.naturalWidth !== 0) {
                ctx.drawImage(frameImage, 0, 0, canvas.width, canvas.height);
            }

            // ‡ß™. ‡¶ü‡ßá‡¶ï‡ßç‡¶∏‡¶ü ‡¶Ü‡¶Å‡¶ï‡¶æ
            drawText();
        }

        function drawText() {
            ctx.textAlign = 'left';
            ctx.fillStyle = '#ffffff'; // ‡¶∏‡¶æ‡¶¶‡¶æ ‡¶ï‡¶æ‡¶≤‡¶æ‡¶∞

            const name = nameInput.value;
            const designation = designationInput.value;

            if (name) {
                ctx.font = 'bold 50px "Hind Siliguri", sans-serif';
                ctx.fillText(name, textLeftMargin, nameY);
            }

            if (designation) {
                ctx.font = '400 35px "Hind Siliguri", sans-serif';
                ctx.fillText(designation, textLeftMargin, desigY);
            }
        }

        // ==========================================
        // ‡ß¨. ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶¨‡¶æ‡¶ü‡¶® ‡¶´‡¶ø‡¶ï‡ßç‡¶∏ (Download Handler)
        // ==========================================
        downloadLink.addEventListener('click', function(e) {
            // ‡¶´‡¶æ‡¶á‡¶≤‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
            const inputName = nameInput.value.trim();
            const fileName = inputName ? `card-${inputName}.png` : 'greeting-card.png';
            
            // ‡¶ï‡ßç‡¶Ø‡¶æ‡¶®‡¶≠‡¶æ‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶á‡¶Æ‡ßá‡¶ú ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶ì‡ßü‡¶æ
            // ‡¶®‡ßã‡¶ü: ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤‡ßá 'via.placeholder.com' ‡¶è‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶è‡¶ü‡¶æ ‡¶ï‡¶æ‡¶ú ‡¶ï‡¶∞‡¶¨‡ßá ‡¶®‡¶æ
            // ‡¶§‡¶æ‡¶á ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡ßç‡¶∞‡ßá‡¶Æ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡¶ø
            try {
                const dataUrl = canvas.toDataURL('image/png');
                this.href = dataUrl;
                this.download = fileName;
            } catch (error) {
                console.error("Download Error:", error);
                alert("‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°‡ßá ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ ‡¶π‡¶ö‡ßç‡¶õ‡ßá‡•§ ‡¶¶‡ßü‡¶æ ‡¶ï‡¶∞‡ßá ‡¶®‡¶ø‡¶∂‡ßç‡¶ö‡¶ø‡¶§ ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ü‡¶™‡¶®‡¶ø ‡¶≤‡ßã‡¶ï‡¶æ‡¶≤ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡¶õ‡ßá‡¶® ‡¶è‡¶¨‡¶Ç ‡¶¨‡¶æ‡¶á‡¶∞‡ßá‡¶∞ ‡¶ï‡ßã‡¶®‡ßã ‡¶≤‡¶ø‡¶Ç‡¶ï‡ßá‡¶∞ ‡¶õ‡¶¨‡¶ø ‡¶´‡ßç‡¶∞‡ßá‡¶Æ‡ßá ‡¶®‡ßá‡¶á‡•§");
                e.preventDefault();
            }
        });

    </script>
</body>
</html>